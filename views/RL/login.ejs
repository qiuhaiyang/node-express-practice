<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>管理员登录-WeAdmin Frame型后台管理系统-WeAdmin 1.0</title>
	<meta name="renderer" content="webkit|ie-comp|ie-stand">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <meta http-equiv="Cache-Control" content="no-siteapp" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" href="/static/css/font.css">
	<link rel="stylesheet" href="/static/css/weadmin.css">
    <script src="/lib/layui/layui.js" charset="utf-8"></script>

</head>
<body class="login-bg">
    
    <div class="login">
        <div class="message">医院管理系统登录</div>
        <div id="darkbannerwrap"></div>
        
        <form  method="post" class="layui-form" >
            <input name="username" placeholder="用户名"  type="text" required class="layui-input" >
            <hr class="hr15">
            <input name="password" required placeholder="密码"  type="password" class="layui-input">
            <hr class="hr15">
            <input class="loginin" value="登录" lay-submit lay-filter="login" style="width:100%;" type="button" id="submit">
            <hr class="hr20" >
            <input class="register" value="注册" style="width:100%;" type="button" id="register">
            <hr class="hr20" >
        </form>
    </div>

    <script type="text/javascript">
        window.onload = function(){
            document.getElementById('register').onclick = function (){
                location.href = '/rl/register'
            }
            document.getElementById('submit').onclick = function(){
                let inputs = document.querySelectorAll('input:not([type=button])')
                inputs.forEach((item)=>{
                    if(item.value ==''){
                        alert(item.placeholder + '不能为空')
                        item.style.borderColor = 'red'
                    }
                })
                var xhr = new XMLHttpRequest()
                xhr.open('post','/rl/lg')
                var formdata = new FormData()
                formdata.set('username',inputs[0].value)
                formdata.set('password',inputs[1].value)
                xhr.send(formdata)
                xhr.onreadystatechange = function (){
                    if(this.status == 200 && this.readyState==4){
                        if(this.responseText =='ok'){
                            location.href = '/admin'
                        }else if(this.responseText =='err'){
                            alert("账户密码错误，请重新输入")
                            inputs[1].value = ''
                        }
                    }
                }
            }
        }
    </script>  
    <!-- 底部结束 -->
</body>
</html>